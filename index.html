<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eng Step - AI Powered Learning</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Kanit', sans-serif; }
        .font-eng { font-family: 'Poppins', sans-serif; }
        .gradient-text {
            background: linear-gradient(to right, #2563eb, #4f46e5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-bg {
            background-color: #f3f4f6;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e5e7eb' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake { animation: shake 0.3s ease-in-out; }
        
        /* A-Z Card Styles */
        .az-card { transition: all 0.2s; cursor: pointer; }
        .az-card:active { transform: scale(0.95); }
        .speaking-highlight { border-color: #2563eb !important; background-color: #eff6ff !important; }

        /* Timeline Styles */
        .timeline-line {
            position: absolute;
            left: 2rem;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #e5e7eb;
            z-index: 0;
        }
        @media (min-width: 768px) {
            .timeline-line { left: 50%; transform: translateX(-50%); }
        }

        /* AI Response Styles */
        .ai-response {
            white-space: pre-wrap; /* Preserve newlines */
            line-height: 1.6;
        }
        .ai-loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* AI Floating Widget Animations */
        .slide-up-fade {
            animation: slideUpFade 0.3s ease-out forwards;
        }
        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center cursor-pointer" onclick="showSection('home')">
                    <i class="fa-solid fa-layer-group text-blue-600 text-2xl mr-2"></i>
                    <span class="font-eng font-bold text-xl tracking-tight text-gray-900">Eng<span class="text-blue-600">Step</span></span>
                </div>
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-2 lg:space-x-4 items-center">
                    <button onclick="showSection('home')" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md font-medium transition">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                    <button onclick="showSection('az')" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md font-medium transition flex items-center"><span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-0.5 rounded mr-1">A-Z</span></button>
                    <button onclick="showSection('path')" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md font-medium transition flex items-center"><i class="fas fa-road mr-1"></i> Path</button>
                    <button onclick="showSection('quiz')" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md font-medium transition">Quiz</button>
                    <button onclick="showSection('manager')" class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md font-medium transition flex items-center">
                        <i class="fas fa-users mr-1"></i> ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥
                    </button>
                    <!-- AI Trigger in Navbar (Optional shortcut) -->
                    <button onclick="toggleAIWidget()" class="text-purple-600 hover:text-purple-700 px-3 py-2 rounded-md font-medium transition flex items-center text-sm border border-purple-200 bg-purple-50">
                        <i class="fas fa-robot mr-1"></i> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI
                    </button>
                </div>
                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-gray-600 hover:text-blue-600 focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu Panel -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="showSection('home'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                <button onclick="showSection('az'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50">A-Z ‡∏ó‡πà‡∏≠‡∏á‡∏®‡∏±‡∏û‡∏ó‡πå</button>
                <button onclick="showSection('path'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50">Learning Path</button>
                <button onclick="toggleAIWidget(); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-purple-600 bg-purple-50 font-bold">AI Tutor ‚ú®</button>
                <button onclick="showSection('quiz'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
                <button onclick="showSection('manager'); toggleMobileMenu()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50">‡∏Ñ‡∏ì‡∏∞‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥</button>
            </div>
        </div>
    </nav>

    <!-- Content Container -->
    <main id="main-content">
        
        <!-- HOME SECTION -->
        <section id="home" class="block animate-fade-in">
            <div class="hero-bg">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-28 flex flex-col lg:flex-row items-center">
                    <div class="lg:w-1/2 lg:pr-12 mb-10 lg:mb-0 text-center lg:text-left">
                        <span class="inline-block py-1 px-3 rounded-full bg-blue-100 text-blue-600 text-sm font-semibold mb-4">English Learning Platform</span>
                        <h1 class="text-4xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight">
                            ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©<br>
                            <span class="gradient-text">‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</span>
                        </h1>
                        <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto lg:mx-0">
                            Eng Step ‡∏°‡∏µ Learning Path ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Å‡πâ‡∏≤‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô ‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢ AI ‡∏™‡∏∏‡∏î‡∏•‡πâ‡∏≥
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                            <button onclick="toggleAIWidget()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:from-purple-700 hover:to-indigo-700 transition transform hover:scale-105">
                                <i class="fas fa-robot mr-2"></i> ‡∏ñ‡∏≤‡∏° AI Tutor
                            </button>
                            <button onclick="showSection('path')" class="bg-white text-blue-600 border border-blue-200 px-8 py-3 rounded-lg font-semibold shadow-sm hover:bg-blue-50 transition">
                                ‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                            </button>
                        </div>
                    </div>
                    <div class="lg:w-1/2 relative">
                        <!-- Hero Image -->
                        <div class="relative bg-white p-6 rounded-2xl shadow-xl transform rotate-1 hover:rotate-0 transition duration-500">
                            <div class="flex items-center justify-between mb-4 border-b pb-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                                <span class="text-xs text-gray-400 font-mono">AI_Integration.js</span>
                            </div>
                            <div class="space-y-4 text-center py-8">
                                <div class="inline-block p-4 rounded-full bg-purple-100 text-purple-600 mb-4 text-4xl animate-bounce">
                                    ‚ú®
                                </div>
                                <h3 class="font-bold text-2xl text-gray-800">AI Powered Learning</h3>
                                <p class="text-gray-500">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÑ‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- MANAGER SECTION -->
        <section id="manager" class="hidden py-12 bg-gray-50 min-h-screen">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">‡∏Ñ‡∏ì‡∏∞‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</h2>
                    <p class="text-gray-600">Project Development Team - ‡∏õ‡∏ß‡∏ä. 3/8</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Person 1 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 hover:-translate-y-2 transition-transform duration-300">
                        <div class="h-24 bg-gradient-to-r from-blue-500 to-blue-600"></div>
                        <div class="px-6 pb-6">
                            <div class="relative -top-12 text-center">
                                <div class="w-24 h-24 bg-white rounded-full p-1 shadow-lg mx-auto">
                                    <div class="w-full h-full bg-gray-200 rounded-full flex items-center justify-center text-gray-400 text-4xl overflow-hidden"><i class="fas fa-user"></i></div>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mt-3">‡∏ô‡∏≤‡∏¢‡∏ß‡∏µ‡∏£‡∏ß‡∏±‡∏í‡∏ô‡πå ‡∏ô‡∏±‡∏î‡∏ó‡∏µ</h3>
                                <p class="text-blue-600 text-sm font-medium">‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</p>
                            </div>
                            <div class="space-y-2 text-sm text-gray-600 mt-[-20px] text-center">
                                <p><i class="fas fa-graduation-cap mr-2 text-gray-400"></i>‡∏õ‡∏ß‡∏ä. 3/8</p>
                                <p><i class="fas fa-school mr-2 text-gray-400"></i>‡∏£‡∏£.‡∏ó‡∏±‡∏Å‡∏©‡∏¥‡∏ì‡∏≤‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
                            </div>
                        </div>
                    </div>
                    <!-- Person 2 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 hover:-translate-y-2 transition-transform duration-300">
                        <div class="h-24 bg-gradient-to-r from-purple-500 to-purple-600"></div>
                        <div class="px-6 pb-6">
                            <div class="relative -top-12 text-center">
                                <div class="w-24 h-24 bg-white rounded-full p-1 shadow-lg mx-auto">
                                    <div class="w-full h-full bg-gray-200 rounded-full flex items-center justify-center text-gray-400 text-4xl overflow-hidden"><i class="fas fa-user"></i></div>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mt-3">‡∏ô‡∏≤‡∏¢‡∏†‡∏±‡∏Ñ‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡∏Ç‡∏≥‡∏ó‡∏≠‡∏á</h3>
                                <p class="text-purple-600 text-sm font-medium">‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥</p>
                            </div>
                            <div class="space-y-2 text-sm text-gray-600 mt-[-20px] text-center">
                                <p><i class="fas fa-graduation-cap mr-2 text-gray-400"></i>‡∏õ‡∏ß‡∏ä. 3/8</p>
                                <p><i class="fas fa-school mr-2 text-gray-400"></i>‡∏£‡∏£.‡∏ó‡∏±‡∏Å‡∏©‡∏¥‡∏ì‡∏≤‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
                            </div>
                        </div>
                    </div>
                    <!-- Person 3 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 hover:-translate-y-2 transition-transform duration-300">
                        <div class="h-24 bg-gradient-to-r from-orange-500 to-orange-600"></div>
                        <div class="px-6 pb-6">
                            <div class="relative -top-12 text-center">
                                <div class="w-24 h-24 bg-white rounded-full p-1 shadow-lg mx-auto">
                                    <div class="w-full h-full bg-gray-200 rounded-full flex items-center justify-center text-gray-400 text-4xl overflow-hidden"><i class="fas fa-user"></i></div>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mt-3">‡∏ô‡∏≤‡∏¢‡∏†‡∏≤‡∏ô‡∏∏‡πÄ‡∏î‡∏ä ‡∏ß‡∏á‡∏©‡πå‡∏î‡∏µ</h3>
                                <p class="text-orange-600 text-sm font-medium">‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥</p>
                            </div>
                            <div class="space-y-2 text-sm text-gray-600 mt-[-20px] text-center">
                                <p><i class="fas fa-graduation-cap mr-2 text-gray-400"></i>‡∏õ‡∏ß‡∏ä. 3/8</p>
                                <p><i class="fas fa-school mr-2 text-gray-400"></i>‡∏£‡∏£.‡∏ó‡∏±‡∏Å‡∏©‡∏¥‡∏ì‡∏≤‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-12 text-center">
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-800 font-medium text-sm transition">
                        <i class="fas fa-arrow-left mr-1"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
            </div>
        </section>

        <!-- A-Z SECTION -->
        <section id="az" class="hidden py-12 bg-white min-h-screen">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">A - Z Vocabulary</h2>
                    <p class="text-gray-600">‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á <i class="fas fa-volume-up text-blue-500"></i></p>
                </div>
                <div id="az-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
            </div>
        </section>

        <!-- LEARNING PATH SECTION -->
        <section id="path" class="hidden py-12 bg-white min-h-screen">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">üó∫Ô∏è Your Learning Path</h2>
                    <p class="text-gray-600">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                </div>

                <div class="relative">
                    <div class="timeline-line"></div>
                    <!-- Step 1: Beginner -->
                    <div class="relative mb-16 md:mb-24">
                        <div class="md:flex items-center w-full">
                            <div class="hidden md:block w-1/2 pr-8 text-right">
                                <h3 class="text-2xl font-bold text-green-600 font-eng">Step 1 : Beginner</h3>
                                <span class="bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
                                <p class="text-gray-500 mt-2">‡∏õ‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏®‡∏π‡∏ô‡∏¢‡πå</p>
                            </div>
                            <div class="absolute left-8 md:left-1/2 transform md:-translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-12 h-12 bg-green-500 rounded-full border-4 border-white shadow-lg z-10">
                                <i class="fas fa-seedling text-white"></i>
                            </div>
                            <div class="ml-20 md:ml-0 md:w-1/2 md:pl-12">
                                <div class="md:hidden mb-2">
                                    <h3 class="text-xl font-bold text-green-600 font-eng">Step 1 : Beginner</h3>
                                    <p class="text-xs text-gray-400">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-md border border-green-100 hover:border-green-300 transition cursor-pointer" onclick="openLesson('beginner')">
                                    <ul class="space-y-2 text-gray-700 text-sm mb-4">
                                        <li><i class="fas fa-check text-green-500 mr-2"></i> A-Z & ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á</li>
                                        <li><i class="fas fa-check text-green-500 mr-2"></i> Verb to Be (is, am, are)</li>
                                        <li><i class="fas fa-check text-green-500 mr-2"></i> ‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ (Greetings)</li>
                                    </ul>
                                    <button class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Step 1</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Step 2: Elementary -->
                    <div class="relative mb-16 md:mb-24">
                        <div class="md:flex items-center w-full flex-row-reverse">
                            <div class="hidden md:block w-1/2 pl-12 text-left">
                                <h3 class="text-2xl font-bold text-blue-600 font-eng">Step 2 : Elementary</h3>
                                <span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡πâ‡∏ô</span>
                                <p class="text-gray-500 mt-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</p>
                            </div>
                            <div class="absolute left-8 md:left-1/2 transform md:-translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-12 h-12 bg-blue-500 rounded-full border-4 border-white shadow-lg z-10">
                                <i class="fas fa-leaf text-white"></i>
                            </div>
                            <div class="ml-20 md:ml-0 md:w-1/2 md:pr-8 text-right">
                                <div class="md:hidden mb-2 text-left">
                                    <h3 class="text-xl font-bold text-blue-600 font-eng">Step 2 : Elementary</h3>
                                    <p class="text-xs text-gray-400">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡πâ‡∏ô</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-md border border-blue-100 hover:border-blue-300 transition cursor-pointer text-left" onclick="openLesson('elementary')">
                                    <ul class="space-y-2 text-gray-700 text-sm mb-4">
                                        <li><i class="fas fa-check text-blue-500 mr-2"></i> Present Simple Tense</li>
                                        <li><i class="fas fa-check text-blue-500 mr-2"></i> Daily Routine (‡∏Å‡∏¥‡∏à‡∏ß‡∏±‡∏ï‡∏£)</li>
                                        <li><i class="fas fa-check text-blue-500 mr-2"></i> Numbers & Time</li>
                                    </ul>
                                    <button class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Step 2</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Step 3: Intermediate -->
                    <div class="relative mb-16 md:mb-24">
                        <div class="md:flex items-center w-full">
                            <div class="hidden md:block w-1/2 pr-8 text-right">
                                <h3 class="text-2xl font-bold text-orange-500 font-eng">Step 3 : Intermediate</h3>
                                <span class="bg-orange-100 text-orange-800 text-xs font-semibold px-2.5 py-0.5 rounded">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á</span>
                                <p class="text-gray-500 mt-2">‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏Ñ‡∏•‡πà‡∏ß ‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô</p>
                            </div>
                            <div class="absolute left-8 md:left-1/2 transform md:-translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-12 h-12 bg-orange-500 rounded-full border-4 border-white shadow-lg z-10">
                                <i class="fas fa-tree text-white"></i>
                            </div>
                            <div class="ml-20 md:ml-0 md:w-1/2 md:pl-12">
                                <div class="md:hidden mb-2">
                                    <h3 class="text-xl font-bold text-orange-500 font-eng">Step 3 : Intermediate</h3>
                                    <p class="text-xs text-gray-400">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-md border border-orange-100 hover:border-orange-300 transition cursor-pointer" onclick="openLesson('intermediate')">
                                    <ul class="space-y-2 text-gray-700 text-sm mb-4">
                                        <li><i class="fas fa-check text-orange-500 mr-2"></i> Past & Future Tenses</li>
                                        <li><i class="fas fa-check text-orange-500 mr-2"></i> Travel & Directions</li>
                                        <li><i class="fas fa-check text-orange-500 mr-2"></i> Basic Conversation</li>
                                    </ul>
                                    <button class="w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Step 3</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Step 4: Advanced -->
                    <div class="relative">
                        <div class="md:flex items-center w-full flex-row-reverse">
                            <div class="hidden md:block w-1/2 pl-12 text-left">
                                <h3 class="text-2xl font-bold text-purple-600 font-eng">Step 4 : Advanced</h3>
                                <span class="bg-purple-100 text-purple-800 text-xs font-semibold px-2.5 py-0.5 rounded">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</span>
                                <p class="text-gray-500 mt-2">‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
                            </div>
                            <div class="absolute left-8 md:left-1/2 transform md:-translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-12 h-12 bg-purple-600 rounded-full border-4 border-white shadow-lg z-10">
                                <i class="fas fa-gem text-white"></i>
                            </div>
                            <div class="ml-20 md:ml-0 md:w-1/2 md:pr-8 text-right">
                                <div class="md:hidden mb-2 text-left">
                                    <h3 class="text-xl font-bold text-purple-600 font-eng">Step 4 : Advanced</h3>
                                    <p class="text-xs text-gray-400">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-md border border-purple-100 hover:border-purple-300 transition cursor-pointer text-left" onclick="openLesson('advanced')">
                                    <ul class="space-y-2 text-gray-700 text-sm mb-4">
                                        <li><i class="fas fa-check text-purple-500 mr-2"></i> Business English</li>
                                        <li><i class="fas fa-check text-purple-500 mr-2"></i> Idioms & Slang</li>
                                        <li><i class="fas fa-check text-purple-500 mr-2"></i> Complex Grammar</li>
                                    </ul>
                                    <button class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Step 4</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- QUIZ SECTION -->
        <section id="quiz" class="hidden py-12 bg-white min-h-screen">
            <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <span class="text-blue-600 font-bold tracking-wider uppercase text-sm">Quiz</span>
                    <h2 class="text-3xl font-bold text-gray-900 mt-2">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö</h2>
                </div>
                <div id="quiz-card" class="bg-white border-2 border-gray-100 rounded-2xl p-8 shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-2 bg-gray-100">
                        <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div id="quiz-start" class="text-center py-10">
                        <div class="w-24 h-24 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl animate-bounce">
                            <i class="fas fa-question"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-4">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏´‡∏°?</h3>
                        <p class="text-gray-500 mb-8">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                        <button onclick="startQuiz()" class="bg-blue-600 text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-blue-700 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
                    </div>
                    <div id="quiz-question" class="hidden">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-gray-400 text-sm font-medium">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="q-current">1</span> / <span id="q-total">5</span></span>
                            <span id="score-display" class="bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-xs font-bold">Score: 0</span>
                        </div>
                        <h3 id="q-text" class="text-xl font-bold text-gray-800 mb-8 min-h-[60px]"></h3>
                        <div id="q-options" class="space-y-3"></div>
                    </div>
                    <div id="quiz-result" class="hidden text-center py-8">
                        <div id="result-icon" class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"></div>
                        <h3 class="text-2xl font-bold mb-2">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h3>
                        <p class="text-gray-500 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ</p>
                        <div class="text-6xl font-bold text-blue-600 mb-8 font-eng"><span id="final-score">0</span><span class="text-2xl text-gray-400">/5</span></div>
                        <button onclick="resetQuiz()" class="border border-gray-300 text-gray-600 px-6 py-2 rounded-lg hover:bg-gray-50">‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- LESSON MODAL -->
        <div id="lesson-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl w-full max-w-3xl h-[80vh] flex flex-col shadow-2xl animate-fade-in-up">
                <div class="p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-2xl">
                    <h3 id="modal-title" class="font-bold text-lg text-gray-800">Lesson</h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
                </div>
                <div id="modal-content" class="p-6 overflow-y-auto flex-1 text-gray-700 leading-relaxed"></div>
                <div class="p-4 border-t bg-gray-50 rounded-b-2xl flex justify-end">
                    <button onclick="closeModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß</button>
                </div>
            </div>
        </div>
        
        <!-- AI FLOATING WIDGET (NEW) -->
        <div id="ai-widget-container" class="fixed bottom-4 left-4 z-50 flex flex-col-reverse items-start gap-4">
            
            <!-- Toggle Button -->
            <button onclick="toggleAIWidget()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white w-16 h-16 rounded-full shadow-lg hover:scale-110 transition transform flex items-center justify-center text-2xl animate-bounce-slow">
                <i class="fas fa-robot"></i>
            </button>

            <!-- Chat Window -->
            <div id="ai-chat-window" class="hidden bg-white w-[90vw] max-w-md rounded-2xl shadow-2xl border border-gray-200 overflow-hidden slide-up-fade origin-bottom-left">
                <!-- Header -->
                <div class="bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-3 flex justify-between items-center text-white">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-robot"></i>
                        <span class="font-bold">AI Tutor Assistant</span>
                    </div>
                    <button onclick="toggleAIWidget()" class="hover:text-gray-200"><i class="fas fa-times"></i></button>
                </div>
                
                <!-- Mode Selection -->
                <div class="grid grid-cols-2 border-b border-gray-100">
                    <button onclick="setAIMode('fix')" id="mode-fix" class="p-3 text-sm font-medium bg-purple-50 text-purple-700 border-b-2 border-purple-600 transition">
                        <i class="fas fa-wrench mr-1"></i> ‡πÅ‡∏Å‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
                    </button>
                    <button onclick="setAIMode('vocab')" id="mode-vocab" class="p-3 text-sm font-medium text-gray-500 hover:bg-gray-50 transition">
                        <i class="fas fa-search mr-1"></i> ‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå
                    </button>
                </div>

                <!-- Content -->
                <div class="p-4 max-h-[60vh] overflow-y-auto">
                    <label id="ai-input-label" class="block text-xs font-medium text-gray-500 mb-2">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à:</label>
                    <textarea id="ai-input" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none text-sm mb-3" placeholder="‡πÄ‡∏ä‡πà‡∏ô I go to school yesterday..."></textarea>
                    
                    <button onclick="callGeminiAPI()" id="ai-submit-btn" class="w-full bg-purple-600 text-white py-2 rounded-lg font-semibold hover:bg-purple-700 transition flex justify-center items-center text-sm">
                        <span>‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ AI ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</span> <i class="fas fa-paper-plane ml-2"></i>
                    </button>

                    <!-- Output -->
                    <div id="ai-result-container" class="hidden mt-4 bg-gray-50 rounded-lg p-3 border border-gray-100">
                        <div id="ai-output" class="text-sm text-gray-800 ai-response"></div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <span class="font-eng font-bold text-xl">Eng<span class="text-blue-400">Step</span></span>
            <p class="text-gray-400 text-sm mt-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</p>
            <div class="mt-4 text-gray-500 text-xs">
                ‡∏Ñ‡∏ì‡∏∞‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥: ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏õ‡∏ß‡∏ä. 3/8
            </div>
        </div>
    </footer>

    <script>
        // --- Navigation Logic ---
        function showSection(sectionId) {
            document.querySelectorAll('main > section').forEach(sec => sec.classList.add('hidden'));
            const target = document.getElementById(sectionId);
            if(target) {
                target.classList.remove('hidden');
                target.classList.add('animate-fade-in');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        // --- A-Z Logic ---
        const alphabetData = [
            { char: 'A', word: 'Apple', thai: '‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•', icon: 'üçé' }, { char: 'B', word: 'Bear', thai: '‡∏´‡∏°‡∏µ', icon: 'üêª' },
            { char: 'C', word: 'Cat', thai: '‡πÅ‡∏°‡∏ß', icon: 'üê±' }, { char: 'D', word: 'Dog', thai: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç', icon: 'üê∂' },
            { char: 'E', word: 'Elephant', thai: '‡∏ä‡πâ‡∏≤‡∏á', icon: 'üêò' }, { char: 'F', word: 'Fish', thai: '‡∏õ‡∏•‡∏≤', icon: 'üêü' },
            { char: 'G', word: 'Giraffe', thai: '‡∏¢‡∏µ‡∏£‡∏≤‡∏ü', icon: 'ü¶í' }, { char: 'H', word: 'House', thai: '‡∏ö‡πâ‡∏≤‡∏ô', icon: 'üè†' },
            { char: 'I', word: 'Ice Cream', thai: '‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°', icon: 'üç¶' }, { char: 'J', word: 'Juice', thai: '‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ', icon: 'üßÉ' },
            { char: 'K', word: 'Kite', thai: '‡∏ß‡πà‡∏≤‡∏ß', icon: 'ü™Å' }, { char: 'L', word: 'Lion', thai: '‡∏™‡∏¥‡∏á‡πÇ‡∏ï', icon: 'ü¶Å' },
            { char: 'M', word: 'Monkey', thai: '‡∏•‡∏¥‡∏á', icon: 'üêµ' }, { char: 'N', word: 'Nose', thai: '‡∏à‡∏°‡∏π‡∏Å', icon: 'üëÉ' },
            { char: 'O', word: 'Orange', thai: '‡∏™‡πâ‡∏°', icon: 'üçä' }, { char: 'P', word: 'Pizza', thai: '‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤', icon: 'üçï' },
            { char: 'Q', word: 'Queen', thai: '‡∏£‡∏≤‡∏ä‡∏¥‡∏ô‡∏µ', icon: 'üëë' }, { char: 'R', word: 'Rabbit', thai: '‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢', icon: 'üê∞' },
            { char: 'S', word: 'Sun', thai: '‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', icon: '‚òÄÔ∏è' }, { char: 'T', word: 'Tree', thai: '‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ', icon: 'üå≥' },
            { char: 'U', word: 'Umbrella', thai: '‡∏£‡πà‡∏°', icon: '‚òÇÔ∏è' }, { char: 'V', word: 'Van', thai: '‡∏£‡∏ñ‡∏ï‡∏π‡πâ', icon: 'üöê' },
            { char: 'W', word: 'Water', thai: '‡∏ô‡πâ‡∏≥', icon: 'üíß' }, { char: 'X', word: 'Xylophone', thai: '‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡∏ù‡∏£‡∏±‡πà‡∏á', icon: 'üéº' },
            { char: 'Y', word: 'Yellow', thai: '‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', icon: 'üíõ' }, { char: 'Z', word: 'Zebra', thai: '‡∏°‡πâ‡∏≤‡∏•‡∏≤‡∏¢', icon: 'ü¶ì' }
        ];

        function renderAlphabet() {
            const grid = document.getElementById('az-grid');
            grid.innerHTML = '';
            alphabetData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'az-card bg-white border border-gray-200 rounded-xl p-4 text-center shadow-sm hover:shadow-md relative overflow-hidden';
                card.onclick = () => speakWord(item.word, card);
                card.innerHTML = `
                    <div class="absolute top-2 right-2 text-gray-300 text-xs"><i class="fas fa-volume-up"></i></div>
                    <div class="text-4xl mb-2">${item.icon}</div>
                    <h3 class="text-2xl font-bold text-blue-600 font-eng">${item.char}</h3>
                    <p class="text-gray-800 font-medium font-eng">${item.word}</p>
                    <p class="text-xs text-gray-500 mt-1">${item.thai}</p>
                `;
                grid.appendChild(card);
            });
        }
        function speakWord(word, cardElement) {
            document.querySelectorAll('.az-card').forEach(c => c.classList.remove('speaking-highlight'));
            cardElement.classList.add('speaking-highlight');
            setTimeout(() => cardElement.classList.remove('speaking-highlight'), 1000);
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US'; utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            }
        }
        renderAlphabet();

        // --- Lesson Content ---
        const lessonContent = {
            'beginner': `
                <div class="space-y-6">
                    <div class="bg-green-50 p-4 rounded-xl border-l-4 border-green-500">
                        <h4 class="font-bold text-green-800 mb-2">1. Basic Greetings (‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢)</h4>
                        <ul class="space-y-2 text-gray-700">
                            <li>üëã <strong>Hello / Hi</strong> - ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ</li>
                            <li>üåÖ <strong>Good Morning</strong> - ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤</li>
                            <li>‚òÄÔ∏è <strong>Good Afternoon</strong> - ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢</li>
                            <li>üåô <strong>Good Night</strong> - ‡∏£‡∏≤‡∏ï‡∏£‡∏µ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2">Verb to Be (is, am, are)</h4>
                        <table class="w-full text-left border-collapse">
                            <tr class="bg-gray-100">
                                <th class="p-2">Subject</th><th class="p-2">Verb</th><th class="p-2">Example</th>
                            </tr>
                            <tr><td class="p-2 border-b">I</td><td class="p-2 border-b">am</td><td class="p-2 border-b">I am a student.</td></tr>
                            <tr><td class="p-2 border-b">He/She/It</td><td class="p-2 border-b">is</td><td class="p-2 border-b">He is happy.</td></tr>
                            <tr><td class="p-2 border-b">You/We/They</td><td class="p-2 border-b">are</td><td class="p-2 border-b">We are friends.</td></tr>
                        </table>
                    </div>
                </div>
            `,
            'elementary': `
                <div class="space-y-6">
                    <h4 class="font-bold text-lg text-blue-700">Present Simple Tense</h4>
                    <p>‡πÉ‡∏ä‡πâ‡∏û‡∏π‡∏î‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏¥‡∏à‡∏ß‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (Facts & Habits)</p>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-mono text-blue-800">Subject + Verb 1 (s/es)</p>
                    </div>
                    <ul class="list-disc list-inside text-gray-700 ml-2">
                        <li>I eat rice every day. (‡∏â‡∏±‡∏ô‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô)</li>
                        <li>She <strong>walks</strong> to school. (‡πÄ‡∏ò‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ‡πÄ‡∏ï‡∏¥‡∏° s ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏û‡∏à‡∏ô‡πå)</li>
                    </ul>
                    
                    <h4 class="font-bold text-lg mt-4 text-blue-700">Telling Time (‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤)</h4>
                    <ul class="space-y-1 text-gray-700">
                        <li>üïí 3:00 = It's three o'clock.</li>
                        <li>üïù 2:30 = It's half past two.</li>
                    </ul>
                </div>
            `,
            'intermediate': `
                <div class="space-y-6">
                    <h4 class="font-bold text-lg text-orange-600">Past Tense (‡∏≠‡∏î‡∏µ‡∏ï) vs Future Tense (‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-3 rounded">
                            <strong class="text-gray-700">Past Simple</strong>
                            <p class="text-sm text-gray-500 mt-1">I <strong>went</strong> to the market yesterday.</p>
                        </div>
                        <div class="bg-orange-50 p-3 rounded">
                            <strong class="text-orange-700">Future Simple</strong>
                            <p class="text-sm text-gray-500 mt-1">I <strong>will go</strong> to the market tomorrow.</p>
                        </div>
                    </div>
                    <h4 class="font-bold text-lg mt-4 text-orange-600">Travel Conversation</h4>
                    <div class="bg-gray-100 p-4 rounded-lg italic text-gray-700">
                        "Excuse me, could you tell me how to get to the train station?"<br>
                        "Sure, go straight and turn left at the corner."
                    </div>
                </div>
            `,
            'advanced': `
                <div class="space-y-6">
                    <h4 class="font-bold text-lg text-purple-700">Business English: Emailing</h4>
                    <div class="border p-4 rounded-lg bg-white shadow-sm">
                        <p><strong>Formal Opening:</strong> "Dear Mr./Ms. [Name],"</p>
                        <p class="mt-2"><strong>Purpose:</strong> "I am writing to inquire about..." (‡∏â‡∏±‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö...)</p>
                        <p class="mt-2"><strong>Closing:</strong> "Sincerely," or "Best regards,"</p>
                    </div>
                    
                    <h4 class="font-bold text-lg mt-4 text-purple-700">Idioms (‡∏™‡∏≥‡∏ô‡∏ß‡∏ô)</h4>
                    <ul class="space-y-2">
                        <li>üî• <strong>Break a leg</strong> = Good luck (‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ)</li>
                        <li>üåßÔ∏è <strong>Under the weather</strong> = Sick (‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢)</li>
                        <li>üç∞ <strong>Piece of cake</strong> = Very easy (‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡πÜ)</li>
                    </ul>
                </div>
            `
        };

        function openLesson(id) {
            document.getElementById('modal-title').innerText = id.charAt(0).toUpperCase() + id.slice(1);
            document.getElementById('modal-content').innerHTML = lessonContent[id] || '<p>Content coming soon!</p>';
            document.getElementById('lesson-modal').classList.remove('hidden');
        }
        function closeModal() { document.getElementById('lesson-modal').classList.add('hidden'); }

        // --- Quiz Logic ---
        const questions = [
            { q: 'Step 1: I ___ a student.', options: ['is', 'am', 'are'], correct: 1 },
            { q: 'Step 2: She ___ to school.', options: ['go', 'goes', 'going'], correct: 1 },
            { q: 'Step 3: Yesterday, I ___ football.', options: ['play', 'played', 'playing'], correct: 1 },
            { q: 'Step 4: "Break a leg" means?', options: ['‡∏Ç‡∏≤‡∏´‡∏±‡∏Å', '‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ', '‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å'], correct: 1 },
            { q: 'General: Apple ‡∏™‡∏µ‡∏≠‡∏∞‡πÑ‡∏£?', options: ['Blue', 'Red', 'Black'], correct: 1 }
        ];
        let qIndex = 0, score = 0;

        function startQuiz() {
            document.getElementById('quiz-start').classList.add('hidden');
            document.getElementById('quiz-question').classList.remove('hidden');
            qIndex = 0; score = 0; updateQuizUI();
        }

        function updateQuizUI() {
            const q = questions[qIndex];
            document.getElementById('q-current').innerText = qIndex + 1;
            document.getElementById('q-total').innerText = questions.length;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('score-display').innerText = `Score: ${score}`;
            document.getElementById('progress-bar').style.width = `${((qIndex)/questions.length)*100}%`;
            
            const opts = document.getElementById('q-options');
            opts.innerHTML = '';
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'w-full text-left p-4 rounded-lg border hover:bg-blue-50 transition font-eng';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, btn);
                opts.appendChild(btn);
            });
        }

        function checkAnswer(idx, btn) {
            const correct = questions[qIndex].correct;
            const all = document.getElementById('q-options').children;
            for(let b of all) b.disabled = true;

            if(idx === correct) {
                score++;
                btn.classList.add('bg-green-100', 'border-green-500');
            } else {
                btn.classList.add('bg-red-100', 'border-red-500');
                all[correct].classList.add('bg-green-50', 'border-green-300');
            }

            setTimeout(() => {
                qIndex++;
                if(qIndex < questions.length) updateQuizUI();
                else showResult();
            }, 1000);
        }

        function showResult() {
            document.getElementById('quiz-question').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('progress-bar').style.width = '100%';
            const icon = document.getElementById('result-icon');
            icon.innerHTML = score >= 3 ? 'üèÜ' : 'üìö';
        }

        function resetQuiz() {
            document.getElementById('quiz-result').classList.add('hidden');
            startQuiz();
        }

        // --- AI Gemini Widget Logic ---
        let currentAIMode = 'fix'; // Default mode

        function toggleAIWidget() {
            const widget = document.getElementById('ai-chat-window');
            widget.classList.toggle('hidden');
            
            // If opening, focus input
            if(!widget.classList.contains('hidden')) {
                document.getElementById('ai-input').focus();
            }
        }

        function setAIMode(mode) {
            currentAIMode = mode;
            const btnFix = document.getElementById('mode-fix');
            const btnVocab = document.getElementById('mode-vocab');
            const label = document.getElementById('ai-input-label');
            const input = document.getElementById('ai-input');
            const btn = document.getElementById('ai-submit-btn');
            
            // Update Tabs
            if (mode === 'fix') {
                btnFix.className = "p-3 text-sm font-medium bg-purple-50 text-purple-700 border-b-2 border-purple-600 transition";
                btnFix.innerHTML = `<i class="fas fa-wrench mr-1"></i> ‡πÅ‡∏Å‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ`;
                
                btnVocab.className = "p-3 text-sm font-medium text-gray-500 hover:bg-gray-50 transition";
                
                label.innerText = "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à:";
                input.placeholder = "‡πÄ‡∏ä‡πà‡∏ô I go to school yesterday...";
                btn.innerHTML = `<span>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ</span> <i class="fas fa-wrench ml-2"></i>`;
            } else {
                btnVocab.className = "p-3 text-sm font-medium bg-green-50 text-green-700 border-b-2 border-green-600 transition";
                btnVocab.innerHTML = `<i class="fas fa-search mr-1"></i> ‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå`;

                btnFix.className = "p-3 text-sm font-medium text-gray-500 hover:bg-gray-50 transition";
                
                label.innerText = "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏π‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:";
                input.placeholder = "‡πÄ‡∏ä‡πà‡∏ô Innovation, Happy...";
                btn.innerHTML = `<span>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</span> <i class="fas fa-search ml-2"></i>`;
            }
            
            // Reset result
            document.getElementById('ai-result-container').classList.add('hidden');
            document.getElementById('ai-output').innerHTML = "";
            input.value = "";
            input.focus();
        }

        async function callGeminiAPI() {
            const input = document.getElementById('ai-input').value.trim();
            if (!input) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏ö");

            const btn = document.getElementById('ai-submit-btn');
            const outputContainer = document.getElementById('ai-result-container');
            const output = document.getElementById('ai-output');
            const apiKey = ""; // System provides key at runtime

            // UI Loading
            btn.disabled = true;
            btn.innerHTML = `<span class="ai-loading mr-2"></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...`;
            outputContainer.classList.remove('hidden');
            output.innerHTML = "AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...";

            // Prompt Logic
            let systemInstruction = "";
            if (currentAIMode === 'fix') {
                systemInstruction = `You are an English tutor for Thai students. 
                The user will provide an English sentence.
                Your task:
                1. Show "Corrected Sentence".
                2. Explain the grammar mistake in Thai.
                3. Give a short tip.`;
            } else {
                systemInstruction = `You are an English tutor for Thai students.
                The user will provide a word.
                Your task:
                1. Definition in Thai & English.
                2. Synonyms.
                3. 2 Example sentences.`;
            }

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: input }] }],
                        systemInstruction: { parts: [{ text: systemInstruction }] }
                    })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);

                let resultText = data.candidates[0].content.parts[0].text;
                resultText = resultText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); // Bold formatting
                output.innerHTML = resultText;

            } catch (error) {
                console.error(error);
                output.innerText = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö";
            } finally {
                btn.disabled = false;
                if (currentAIMode === 'fix') {
                    btn.innerHTML = `<span>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ</span> <i class="fas fa-wrench ml-2"></i>`;
                } else {
                    btn.innerHTML = `<span>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</span> <i class="fas fa-search ml-2"></i>`;
                }
            }
        }
    </script>
</body>
</html>